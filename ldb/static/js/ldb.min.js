(function(){window.App=angular.module("ldb",["ldb.controllers","typeahead"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/dashboard",{templateUrl:window.prefix+"partials/ldb/dashboard.html",controller:"DashboardController"}),$routeProvider.when("/person/:personID",{templateUrl:window.prefix+"partials/ldb/person.html",controller:"PersonDetailController"}),$routeProvider.otherwise({redirectTo:"/dashboard"})}]),angular.module("ldb.controllers",["ldb.apiv2"]).controller("DashboardController",["$scope","Person",function($scope,Person){return $scope.search="",$scope.people=[],$scope.$watch("search",function(){return $scope.search.length>1?Person.search($scope.search,function(people){return $scope.people=people}):$scope.people=[]})}]).controller("PersonDetailController",["$routeParams","$scope","Person",function($routeParams,$scope,Person){return $scope.person=!1,$scope.member=!1,$scope.student=!1,$scope.alumnus=!1,$scope.employee=!1,$scope.committees=[],Person.get($routeParams.personID,function(person){return console.log(person),$scope.person=person,person.member&&Person.getSubresource(person.member,function(member){return $scope.member=member}),person.student&&Person.getSubresource(person.student,function(student){return $scope.student=student}),person.alumnus&&Person.getSubresource(person.alumnus,function(alumnus){return $scope.alumnus=alumnus}),person.employee&&Person.getSubresource(person.employee,function(employee){return $scope.employee=employee}),person.committees?angular.forEach(person.committees,function(committee){return Person.getSubresource(committee,function(committee){return $scope.committees.push(committee)})}):void 0})}]),angular.module("ldb.apiv2",["dienst2"]).factory("Person",["Tastypie",function(Tastypie){var Person;return Person=Tastypie("api/v2/person/"),Person.prototype.toString=function(){var name;return name=self.firstname,self.preposition&&(name+=this.preposition),name+=this.surname},Person}])}).call(this);